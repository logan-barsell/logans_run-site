<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1"
    />
    <title>Logan's Run Project</title>
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="%PUBLIC_URL%/favicons/apple-touch-icon.png"
    />
    <link
      rel="manifest"
      href="%PUBLIC_URL%/favicons/site.webmanifest"
    />
    <script>
      // Fetch theme and set CSS variables before pace loads
      (async function () {
        try {
          const response = await fetch('/api/theme');
          const theme = await response.json();

          // Set CSS variables immediately
          const root = document.documentElement;
          if (theme.primaryColor) {
            root.style.setProperty('--main', theme.primaryColor);
          }
          if (theme.secondaryColor) {
            root.style.setProperty('--secondary', theme.secondaryColor);
          }
          if (theme.primaryFont) {
            root.style.setProperty('--primary-font', theme.primaryFont);
          }
          if (theme.secondaryFont) {
            let fontStack = '';
            switch (theme.secondaryFont) {
              case 'Fira Mono':
                fontStack = "'Fira Mono', 'Courier New', Courier, monospace";
                break;
              case 'JetBrains Mono':
                fontStack =
                  "'JetBrains Mono', 'Courier New', Courier, monospace";
                break;
              case 'Roboto Mono':
                fontStack = "'Roboto Mono', 'Courier New', Courier, monospace";
                break;
              case 'Courier New':
              default:
                fontStack = "'Courier New', Courier, monospace";
                break;
            }
            root.style.setProperty('--secondary-font', fontStack);
          }
        } catch (error) {
          console.log('Could not fetch theme, using defaults');
        }
      })();
    </script>
    <script>
      paceOptions = {
        eventLag: false,
        ajax: false,
        elements: {
          selectors: ['#root'],
        },
        restartOnRequestAfter: false,
        target: '#root',
      };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/pace-js@latest/pace.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Sancreek"
      rel="stylesheet"
    />
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <div class="modal-container"></div>
    <div class="cart-container"></div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
